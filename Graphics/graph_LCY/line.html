<!DOCTYPE html>
<html>
  <head>
    <title>画线</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8" />

    <<!-- Bootstrap -->
    <link href="assets/css/vendor/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="assets/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/vendor/animate/animate.css">
    <link type="text/css" rel="stylesheet" media="all" href="assets/js/vendor/mmenu/css/jquery.mmenu.all.css" />
    <link rel="stylesheet" href="assets/js/vendor/videobackground/css/jquery.videobackground.css">
    <link rel="stylesheet" href="assets/css/vendor/bootstrap-checkbox.css">

    <link rel="stylesheet" href="assets/js/vendor/jgrowl/css/jquery.jgrowl.min.css">
    <link rel="stylesheet" href="assets/js/vendor/chosen/css/chosen.min.css">
    <link rel="stylesheet" href="assets/js/vendor/chosen/css/chosen-bootstrap.css">
    <link rel="stylesheet" href="assets/js/vendor/typeahead/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="assets/js/vendor/datepicker/css/bootstrap-datetimepicker.css">
    <link rel="stylesheet" href="assets/js/vendor/no-ui-slider/css/jquery.nouislider.min.css">
    <link rel="stylesheet" href="assets/js/vendor/tabdrop/css/tabdrop.css">

    <link href="assets/css/minimal.css" rel="stylesheet">
	<script src="line.js"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
      <script src="assets/js/respond.min.js"></script>
    <![endif]-->
  </head>
  <body class="bg-1">


 


    <!-- Preloader -->
    <div class="mask"><div id="loader"></div></div>
    <!--/Preloader -->

    <!-- Wrap all page content here -->
    <div id="wrap">

      


      <!-- Make page fluid -->
      <div class="row">
        




        <!-- Fixed navbar -->
        <div class="navbar navbar-default navbar-fixed-top navbar-transparent-black mm-fixed-top" role="navigation" id="navbar">
          


          <!-- Branding -->
          <div class="navbar-header col-md-2">
            <a class="navbar-brand" href="index.html">
              <strong>MIN</strong>IMAL
            </a>
            <div class="sidebar-collapse">
              <a href="#">
                <i class="fa fa-bars"></i>
              </a>
            </div>
          </div>
          <!-- Branding end -->


          <!-- .nav-collapse -->
          <div class="navbar-collapse">
                        
            <!-- Page refresh -->
            <ul class="nav navbar-nav refresh">
              <li class="divided">
                <a href="#" class="page-refresh"><i class="fa fa-refresh"></i></a>
              </li>
            </ul>
            <!-- /Page refresh -->

            <!-- Search -->
            <div class="search" id="main-search">
              <i class="fa fa-search"></i> <input type="text" placeholder="Search...">
            </div>
            <!-- Search end -->

          </div>
          <!--/.nav-collapse -->



        </div>
        <!-- Fixed navbar end -->

        <!-- Page content -->
        <div id="content" class="col-md-12">
          

          <!-- page header -->
          <div class="pageheader">
            

            <h2><i class="fa fa-tint" style="line-height: 50px;padding-left: 0;"></i> 画线算法 </h2>
            


          </div>
          <!-- /page header -->
          

          <!-- content main container -->
          <div class="main">

            <!-- row -->
            <div class="row">

              <!-- col 6 -->
              <div class="col-md-10">


                <!-- tile -->
                <section class="tile color transparent-white">



                  <!-- tile header -->
                  <div class="tile-header">
                    <h1><strong>画板</strong></h1>
                    <div class="controls">
                      <a href="#" class="refresh"><i class="fa fa-refresh"></i></a>
                      <a href="#" class="remove"><i class="fa fa-times"></i></a>
                    </div>
                  </div>
                  <!-- /tile header -->

                  <!-- tile body -->
                  <div class="tile-body">
						
					<div class="row">
						<div class="col-md-9">					
						<canvas id="myCanvas" width="900" height="600" style="border:1px solid #d3d3d3;margin-left:50px">
							Your browser does not support the HTML5 canvas tag.
						</canvas>
						</div class="col-md-3">
							<div id="colorpicker">
                          <div class="noUiSlider slider red" id="red"></div>
                          <div class="noUiSlider slider green" id="green"></div>
                          <div class="noUiSlider slider cyan" id="blue"></div>
                          
                          <div class="result"></div>
                        </div>
						<br>
						<div class="col-sm-2">
						<select class="chosen-select chosen-transparent form-control" id="select">
                            <option value="1">数值微分法</option>
                            <option value="2">中点画线法</option>
                            <option value="3">Bresenham法</option>
                          </select>
						  </div>
						  <br>
						<br>
						<h2>
						<div>起点:（<label id="sx"></label>，<label id="sy"></label>）</div>
						<br>
						<div>终点:（<label id="ex"></label>，<label id="ey"></label>）</div>
						</h2>
						<br>
						<button type="button" class="btn btn-primary margin-bottom-20" id="clear">清空</button>
						</div>
						<div>
					</div>
					
                  </div>
                  <!-- /tile body -->
                  
                


                </section>
                <!-- /tile -->





              </div>
              <!-- /col 6 -->


              
            </div>
            <!-- /row -->
          


          </div>
          <!-- /content container -->

        </div>
        <!-- Page content end -->

      </div>
      <!-- Make page fluid-->


    </div>
    <!-- Wrap all page content end -->

    <section class="videocontent" id="video"></section>



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="assets/js/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="assets/js/vendor/bootstrap/bootstrap.min.js"></script>
    
    <script type="text/javascript" src="assets/js/vendor/mmenu/js/jquery.mmenu.min.js"></script>
    <script type="text/javascript" src="assets/js/vendor/sparkline/jquery.sparkline.min.js"></script>
    <script type="text/javascript" src="assets/js/vendor/nicescroll/jquery.nicescroll.min.js"></script>
    <script type="text/javascript" src="assets/js/vendor/animate-numbers/jquery.animateNumbers.js"></script>
    <script type="text/javascript" src="assets/js/vendor/videobackground/jquery.videobackground.js"></script>
    <script type="text/javascript" src="assets/js/vendor/blockui/jquery.blockUI.js"></script>

    <script src="assets/js/vendor/jgrowl/jquery.jgrowl.min.js"></script>
    <script src="assets/js/vendor/typeahead/typeahead.min.js"></script>
    <script src="assets/js/vendor/momentjs/moment-with-langs.min.js"></script>
    <script src="assets/js/vendor/datepicker/bootstrap-datetimepicker.min.js"></script>
    <script src="assets/js/vendor/chosen/chosen.jquery.min.js"></script>
    <script src="assets/js/vendor/no-ui-slider/jquery.nouislider.min.js"></script>
    <script src="assets/js/vendor/tabdrop/bootstrap-tabdrop.min.js"></script>

    <script src="assets/js/minimal.min.js"></script>

    <script>

		var pointArray=new Array();
		
		var c=document.getElementById("myCanvas");
		var ctx=c.getContext("2d");
		
		var color;
		
		var hx=c.getBoundingClientRect().left;        // 元素左边距离页面左边的距离
		var hy=c.getBoundingClientRect().top;         // 元素上边距离页面上边的距离
		
		var x0=0,y0=0,x1=0,y1=0;
		
		var status=0;

		$(document).click(function(){
			var xt=event.clientX;
			var yt=event.clientY;
			if(xt>=c.getBoundingClientRect().left&&xt<=c.getBoundingClientRect().right&&yt>=c.getBoundingClientRect().top&&yt<=c.getBoundingClientRect().bottom){
				
				if(status==0){
					x0=xt-hx;
					y0=yt-hy;
					$("#sx").text(x0);
					$("#sy").text(y0);
					status=1;
				}else{
					status=0;
					var t=pointArray.length;
					pointArray[t]=[x0,y0,x1,y1,$("#select").val()];
				}
				
			}
				
		});
		
		//鼠标移动获取坐标
		$(document).mousemove(function(){
			x1=event.clientX-hx;
			y1=event.clientY-hy;
			
			if(status==1){
				$("#ex").text(x1);
				$("#ey").text(y1);
			}
			
			
			if(x0!=0){
				ctx.clearRect ( 0 , 0 , 900 , 600 );
				ctx.strokeStyle  = color;
				 var flg=$("#select").val();
				 if(flg==1){
					if(status==1){
						DDAline(x0,y0,x1,y1,ctx);
					}
					$("#sf").text("1");
				 }else if(flg==2){
					if(status==1){
						MidpointLine(x0,y0,x1,y1,ctx);
					}
					$("#sf").text("2");
				 }else if(flg==3){
					if(status==1){
						Integer_Bresenham_line(x0,y0,x1,y1,ctx);
					}
					
					$("#sf").text("3");
				 }
				 for(var i=0;i<pointArray.length;i++){
					if(pointArray[i][4]==1){
						DDAline(pointArray[i][0],pointArray[i][1],pointArray[i][2],pointArray[i][3],ctx);
					}else if(pointArray[i][4]==2){
						MidpointLine(pointArray[i][0],pointArray[i][1],pointArray[i][2],pointArray[i][3],ctx);
					}else if(pointArray[i][4]==3){
						Integer_Bresenham_line(pointArray[i][0],pointArray[i][1],pointArray[i][2],pointArray[i][3],ctx);
					}
				}
				
			}
				
		});
		
		$("#clear").click(function(){
			pointArray=new Array();
		});
		
		$(function(){
      //initialize color picker sliders
      $('.slider').noUiSlider({
         range: [0,255]
        ,start: 127
        ,handles: 1
        ,connect: "lower"
        ,orientation: "vertical"
        ,serialization: {
          resolution: 1
        }
        ,slide: function(){

          color = 'rgb(' + $("#red").val()
             + ',' + $("#green").val()
             + ',' + $("#blue").val()
             + ')';

          $(".result").css({
             background: color
            ,color: color
          });
        }
      });


      
    })
	
	
	

	</script> 
  </body>
</html>
      
